// Steam
class juegoSteam {
    constructor(titulo, genero, calificacion, precio) {
      this.titulo = titulo;
      this.genero = genero;
      this.calificacion = calificacion;
      this.precio = precio;
    }
  }
  
  const JuegoSteam1 = new juegoSteam("Fortnite", "Battle Royale", 8.5, 0);
  const JuegoSteam2 = new juegoSteam("Minecraft", "Sandbox", 9.0, 30);
  const JuegoSteam3 = new juegoSteam(
    "PlayerUnknown's Battlegrounds",
    "Battle Royale",
    8.5,
    39
  );
  const JuegoSteam4 = new juegoSteam("Rocket League", "Deportes", 8.5, 20);
  const JuegoSteam5 = new juegoSteam(
    "Tom Clancy's Rainbow Six Siege",
    "Disparos en Primera Persona",
    9.0,
    48
  );
  const JuegoSteam6 = new juegoSteam(
    "Overwatch",
    "Disparos en Primera Persona",
    9.0,
    43
  );
  const JuegoSteam7 = new juegoSteam("Apex Legends", "Battle Royale", 8.5, 0);
  const JuegoSteam8 = new juegoSteam(
    "Call of Duty: Modern Warfare",
    "Disparos en Primera Persona",
    9.0,
    65
  );
  const JuegoSteam9 = new juegoSteam(
    "Assassin's Creed Odyssey",
    "Acción-Aventura",
    9.0,
    67
  );
  const JuegoSteam10 = new juegoSteam(
    "The Elder Scrolls V: Skyrim",
    "RPG",
    9.5,
    12
  );
  
  const ListJuegoSteam = [
    JuegoSteam1,
    JuegoSteam2,
    JuegoSteam3,
    JuegoSteam4,
    JuegoSteam5,
    JuegoSteam6,
    JuegoSteam7,
    JuegoSteam8,
    JuegoSteam9,
    JuegoSteam10,
  ];
  
  // Microsoft
  class juegoMicrosoft {
    constructor(titulo, genero, calificacion, precio) {
      this.titulo = titulo;
      this.genero = genero;
      this.calificacion = calificacion;
      this.precio = precio;
    }
  }
  const juegoMicrosoft1 = new juegoMicrosoft("Fortnite", "Battle Royale", 8.5, 0);
  const juegoMicrosoft2 = new juegoMicrosoft("Minecraft", "Sandbox", 9.0, 30);
  const juegoMicrosoft3 = new juegoMicrosoft(
    "PlayerUnknown's Battlegrounds",
    "Battle Royale",
    8.5,
    39
  );
  const juegoMicrosoft4 = new juegoMicrosoft(
    "Rocket League",
    "Deportes",
    8.5,
    29
  );
  const juegoMicrosoft5 = new juegoMicrosoft(
    "Tom Clancy's Rainbow Six Siege",
    "Disparos en Primera Persona",
    9.0,
    45
  );
  const juegoMicrosoft6 = new juegoMicrosoft(
    "Overwatch",
    "Disparos en Primera Persona",
    9.0,
    35
  );
  const juegoMicrosoft7 = new juegoMicrosoft(
    "Apex Legends",
    "Battle Royale",
    8.5,
    12
  );
  const juegoMicrosoft8 = new juegoMicrosoft(
    "Call of Duty: Modern Warfare",
    "Disparos en Primera Persona",
    9.0,
    25
  );
  const juegoMicrosoft9 = new juegoMicrosoft(
    "Assassin's Creed Odyssey",
    "Acción-Aventura",
    9.0,
    65
  );
  const juegoMicrosoft10 = new juegoMicrosoft(
    "The Elder Scrolls V: Skyrim",
    "RPG",
    9.5,
    40
  );
  
  const ListjuegosMicrosoft = [
    juegoMicrosoft1,
    juegoMicrosoft2,
    juegoMicrosoft3,
    juegoMicrosoft4,
    juegoMicrosoft5,
    juegoMicrosoft6,
    juegoMicrosoft7,
    juegoMicrosoft8,
    juegoMicrosoft9,
    juegoMicrosoft10,
  ];
  
  // EPic Game
  class juegoEpicGame {
    constructor(titulo, genero, calificacion, precio) {
      this.titulo = titulo;
      this.genero = genero;
      this.calificacion = calificacion;
      this.precio = precio;
    }
  }
  
  const juegosEpicGames1 = new juegoEpicGame("Fortnite", "Battle Royale", 8.5, 0);
  const juegosEpicGames2 = new juegoEpicGame("Minecraft", "Sandbox", 9.0, 30);
  const juegosEpicGames3 = new juegoEpicGame(
    "PlayerUnknown's Battlegrounds",
    "Battle Royale",
    8.5,
    35
  );
  const juegosEpicGames4 = new juegoEpicGame(
    "Rocket League",
    "Deportes",
    8.5,
    22
  );
  const juegosEpicGames5 = new juegoEpicGame(
    "Tom Clancy's Rainbow Six Siege",
    "Disparos en Primera Persona",
    9.0,
    41
  );
  const juegosEpicGames6 = new juegoEpicGame(
    "Overwatch",
    "Disparos en Primera Persona",
    9.0,
    39
  );
  const juegosEpicGames7 = new juegoEpicGame(
    "Apex Legends",
    "Battle Royale",
    8.5,
    1
  );
  const juegosEpicGames8 = new juegoEpicGame(
    "Call of Duty: Modern Warfare",
    "Disparos en Primera Persona",
    9.0,
    59
  );
  const juegosEpicGames9 = new juegoEpicGame(
    "Assassin's Creed Odyssey",
    "Acción-Aventura",
    9.0,
    60
  );
  const juegosEpicGames10 = new juegoEpicGame(
    "The Elder Scrolls V: Skyrim",
    "RPG",
    9.5,
    29
  );
  
  const ListjuegosEpicGame = [
    juegosEpicGames1,
    juegosEpicGames2,
    juegosEpicGames3,
    juegosEpicGames4,
    juegosEpicGames5,
    juegosEpicGames6,
    juegosEpicGames7,
    juegosEpicGames8,
    juegosEpicGames9,
    juegosEpicGames10,
  ];



// Crear botones de filtrado
document.addEventListener("DOMContentLoaded", function() {
    const botonesFiltrado = document.createElement("div");
    botonesFiltrado.setAttribute("id", "botones-filtrado");
  
    const generos = [...new Set([...ListJuegoSteam, ...ListjuegosMicrosoft, ...ListjuegosEpicGame].map(juego => juego.genero))];
  
    generos.forEach(genero => {
      const button = document.createElement("button");
      button.textContent = genero;
      button.addEventListener("click", () => {
        const juegosFiltrados = filtrarJuegosPorgenero(genero);
        const juegosConMinimoPrecio = juegosConPrecioMinimo(juegosFiltrados);
        mostrarJuegos(juegosConMinimoPrecio);
        localStorage.setItem("genero", genero);
      });
      botonesFiltrado.appendChild(button);
    });
  
    document.body.appendChild(botonesFiltrado);
  
    // Función para mostrar juegos
    function mostrarJuegos(juegos) {
      const listaJuegos = document.getElementById("lista-juegos");
      listaJuegos.innerHTML = "";
      juegos.forEach(juego => {
        const item = document.createElement("li");
        item.textContent = `El precio más económico para ${juego.nombre} es: $${juego.precioMinimo} ARS`;
        listaJuegos.appendChild(item);
      });
    }
  
    // Función para filtrar juegos por género
    function filtrarJuegosPorgenero(genero) {
      const juegosFiltrados = [...ListJuegoSteam, ...ListjuegosMicrosoft, ...ListjuegosEpicGame]
        .filter((juego) => juego.genero.toLowerCase().includes(genero.toLowerCase()));
      return juegosFiltrados;
    }
  
    // Función para obtener el precio mínimo de cada juego
    function juegosConPrecioMinimo(juegosFiltrados) {
      return juegosFiltrados.map((juego) => {
        const precios = [
          ListjuegosEpicGame.find((juegoEpic) => juegoEpic.titulo === juego.titulo)?.precio,
          ListJuegoSteam.find((juegoSteam) => juegoSteam.titulo === juego.titulo)?.precio,
          ListjuegosMicrosoft.find((juegoMicrosoft) => juegoMicrosoft.titulo === juego.titulo)?.precio,
        ].filter((precio) => precio !== undefined);
        const precioMinimo = Math.min(...precios);
        return { nombre: juego.titulo, precioMinimo };
      });
    }
  
    // Cargar género desde Local Storage
    const genero = localStorage.getItem("genero");
    if (genero) {
      const juegosFiltrados = filtrarJuegosPorgenero(genero);
      const juegosConMinimoPrecio = juegosConPrecioMinimo(juegosFiltrados);
      mostrarJuegos(juegosConMinimoPrecio);
    }
  
    // Agregar evento de clic a cada juego
    document.getElementById("lista-juegos").addEventListener("click", (e) => {
      if (e.target.tagName === "LI") {
        const juegoSeleccionado = e.target.textContent;
        localStorage.setItem("juegoSeleccionado", juegoSeleccionado);
        mostrarJuegoSeleccionado();
      }
    });
  
    // Función para mostrar juego seleccionado
    function mostrarJuegoSeleccionado() {
      const juegoSeleccionado = localStorage.getItem("juegoSeleccionado");
      const juegoJSON = JSON.stringify(juegoSeleccionado);
      document.getElementById("juego-seleccionado").textContent = juegoJSON;
    }
  
    // Mostrar juego seleccionado
    mostrarJuegoSeleccionado();
  });